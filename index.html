<!DOCTYPE html>
<html>
<head>
    <title>ID Generator</title>
</head>
<body>
    <h1>ID Generator</h1>
    <div>
        <label for="nameInput">Enter your name:</label>
        <input type="text" id="nameInput">
        <button onclick="generateID()">Generate ID</button>
        <p>Generated ID: <span id="result"></span></p>
    </div>
    <div>
        <label for="lookupInput">Lookup name:</label>
        <input type="text" id="lookupInput">
        <button onclick="lookupID()">Lookup ID</button>
        <p>Lookup result: <span id="lookupResult"></span></p>
    </div>
    <script>
        async function generateID() {
            const name = document.getElementById("nameInput").value.trim();
            if (!name) {
                alert("Please enter a name.");
                return;
            }

            try {
                const response = await fetch('http://localhost:3000/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: name })
                });
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById("result").innerText = data.id;
                } else {
                    const error = await response.text();
                    alert(error);
                }
            } catch (error) {
                alert('Error generating ID: ' + error.message);
            }
        }

        async function lookupID() {
            const name = document.getElementById("lookupInput").value.trim();
            if (!name) {
                alert("Please enter a name.");
                return;
            }

            try {
                const response = await fetch('http://localhost:3000/lookup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: name })
                });
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById("lookupResult").innerText = data.id;
                } else {
                    const error = await response.text();
                    alert(error);
                }
            } catch (error) {
                alert('Error looking up ID: ' + error.message);
            }
        }
    </script>
</body>
</html>
